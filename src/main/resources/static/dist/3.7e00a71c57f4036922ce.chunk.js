webpackJsonp([3],{617:function(e,t,n){"use strict";function r(e){d||n(833)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(640),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);var l=n(843),s=n.n(l),d=!1,p=n(24),c=r,u=p(i.a,s.a,!1,c,null,null);u.options.__file="src/views/admin/role/main.vue",t.default=u.exports},640:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(233),i=r(o),a=n(103),l=n(835),s=r(l),d=n(839),p=r(d),c=function(e,t,n){return t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.edit(n.row)}}},"编辑")},u=function(e,t,n){return t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.setRes(n.row)}}},"权限设置")},f=function(e,t,n){return t("Poptip",{props:{confirm:"",title:"您确定要删除这个角色信息吗？"},style:{marginRight:"5px"},on:{"on-ok":function(){e.del(n.row.id)}}},[t("Button",{props:{type:"error",size:"small"}},"删除")])};t.default={computed:(0,i.default)({},(0,a.mapState)({roleList:function(e){return e.role.roleList},totalPage:function(e){return e.role.totalPage},total:function(e){return e.role.totalRow},pageNumber:function(e){return e.role.pageNumber},pageSize:function(e){return e.role.pageSize},role:function(e){return e.role.role}})),methods:{del:function(e){var t=this;this.$store.dispatch("role_del",{ids:e}).then(function(e){e&&"success"==e&&t.$store.dispatch("role_list")})},edit:function(e){this.$store.commit("role_set",e),this.$refs.rf.open("编辑角色",!1)},add:function(){this.$refs.rf.open("新增角色",!0)},changePage:function(e){this.$store.dispatch("role_list",{pn:e})},refresh:function(){this.$store.dispatch("role_list")},setRes:function(e){var t=e.name+"权限设置";this.$refs.rt.open(t,e.id)}},mounted:function(){this.$store.dispatch("role_list"),this.$store.dispatch("res_list_tree")},components:{roleForm:s.default,resTree:p.default},data:function(){var e=this;return{self:this,tableColums:[{title:"角色名",key:"name"},{title:"说明",key:"description"},{title:"操作",key:"action",width:200,align:"center",render:function(t,n){return t("div",[c(e,t,n),u(e,t,n),f(e,t,n)])}}]}}}},641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(233),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(103);t.default={name:"roleForm",computed:(0,o.default)({},(0,i.mapState)({role:function(e){return e.role.role}})),methods:{open:function(e,t){this.isAdd=t,this.modalTitle=e,this.roleModal=!0,t&&this.$store.commit("role_set",{}),this.modalLoading=!1},vChange:function(e){e||this.$refs.formValidate.resetFields()},save:function(){var e=this,t=this;this.modalLoading=!0,this.$refs.formValidate.validate(function(n){if(n){var r="save";t.isAdd||(r="update"),e.$store.dispatch("role_save",r).then(function(n){e.modalLoading=!1,n&&"success"==n&&(t.roleModal=!1,e.$store.dispatch("role_list"))})}else e.modalLoading=!1})},reset:function(){this.$store.dispatch("role_set",{})}},data:function(){return{self:this,roleModal:!1,isAdd:!0,modalTitle:"新增角色",modalLoading:!1,ruleValidate:{name:[{type:"string",required:!0,message:"角色名不能为空",trigger:"blur"},{type:"string",max:50,message:"角色名长度不能超过50",trigger:"blur"}],description:[{type:"string",max:255,message:"角色说明长度不能超过50",trigger:"blur"}]}}}}},642:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(234),i=r(o),a=n(233),l=r(a),s=n(103);t.default={name:"resTree",computed:(0,l.default)({},(0,s.mapState)({resJsonArray:function(e){return e.role.resJsonArray}})),methods:{open:function(e,t){this.roleId=t,this.modalTitle=e,this.resModal=!0,this.modalLoading=!1,this.$store.dispatch("role_res_load",{roleId:this.roleId})},save:function(){var e=this,t=this.$refs.resTree.getCheckedNodes();if(0==t.length)return void this.$Message.error("请选择权限");var n=new Array,r=!0,o=!1,a=void 0;try{for(var l,s=(0,i.default)(t);!(r=(l=s.next()).done);r=!0){var d=l.value;n.push(d.id)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}var p={roleId:this.roleId,resIds:n.join(",")},c=this;this.modalLoading=!0,this.$store.dispatch("role_res_save",p).then(function(t){e.modalLoading=!1,t&&"success"==t&&(c.resModal=!1)})}},data:function(){return{self:this,roleId:"",resModal:!1,modalTitle:"权限设置",modalLoading:!1}},mounted:function(){}}},833:function(e,t,n){var r=n(834);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(61)("ee6ae262",r,!1,{})},834:function(e,t,n){t=e.exports=n(60)(!1),t.push([e.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n",""])},835:function(e,t,n){"use strict";function r(e){d||n(836)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(641),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);var l=n(838),s=n.n(l),d=!1,p=n(24),c=r,u=p(i.a,s.a,!1,c,null,null);u.options.__file="src/views/admin/role/form.vue",t.default=u.exports},836:function(e,t,n){var r=n(837);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(61)("1739235a",r,!1,{})},837:function(e,t,n){t=e.exports=n(60)(!1),t.push([e.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n",""])},838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Modal",{attrs:{"mask-closable":!1},on:{"on-visible-change":e.vChange},model:{value:e.roleModal,callback:function(t){e.roleModal=t},expression:"roleModal"}},[n("p",{attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"information-circled"}}),e._v(" "),n("span",[e._v(e._s(e.modalTitle))])],1),e._v(" "),n("Form",{ref:"formValidate",attrs:{"label-width":80,model:e.role,rules:e.ruleValidate}},[n("FormItem",{attrs:{label:"角色名",prop:"name"}},[n("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入..."},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1),e._v(" "),n("FormItem",{attrs:{label:"说明",prop:"description"}},[n("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入..."},model:{value:e.role.description,callback:function(t){e.$set(e.role,"description",t)},expression:"role.description"}})],1)],1),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"success",loading:e.modalLoading},on:{click:e.save}},[e._v("保存")]),e._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:e.isAdd,expression:"isAdd"}],on:{click:e.reset}},[e._v("重置")]),e._v(" "),n("Button",{attrs:{type:"error"},on:{click:function(t){e.roleModal=!1}}},[e._v("关闭")])],1)],1)],1)},o=[];r._withStripped=!0;var i={render:r,staticRenderFns:o};t.default=i},839:function(e,t,n){"use strict";function r(e){d||n(840)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(642),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);var l=n(842),s=n.n(l),d=!1,p=n(24),c=r,u=p(i.a,s.a,!1,c,null,null);u.options.__file="src/views/admin/role/resTree.vue",t.default=u.exports},840:function(e,t,n){var r=n(841);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(61)("41b612f1",r,!1,{})},841:function(e,t,n){t=e.exports=n(60)(!1),t.push([e.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n",""])},842:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Modal",{attrs:{"mask-closable":!1},model:{value:e.resModal,callback:function(t){e.resModal=t},expression:"resModal"}},[n("p",{attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"information-circled"}}),e._v(" "),n("span",[e._v(e._s(e.modalTitle))])],1),e._v(" "),n("Tree",{ref:"resTree",attrs:{data:e.resJsonArray,"show-checkbox":""}}),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"success",loading:e.modalLoading},on:{click:e.save}},[e._v("保存")]),e._v(" "),n("Button",{attrs:{type:"error"},on:{click:function(t){e.resModal=!1}}},[e._v("关闭")])],1)],1)],1)},o=[];r._withStripped=!0;var i={render:r,staticRenderFns:o};t.default=i},843:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",[n("Col",{attrs:{span:"24"}},[n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[n("Icon",{attrs:{type:"help-buoy"}}),e._v("\n                角色列表\n            ")],1),e._v(" "),n("Row",[n("Col",{attrs:{span:"8"}},[n("Button",{attrs:{type:"primary",icon:"android-add"},on:{click:e.add}},[e._v("新增角色")]),e._v(" "),n("Button",{attrs:{type:"primary",icon:"refresh"},on:{click:e.refresh}},[e._v("刷新")])],1)],1),e._v(" "),n("Row",{staticClass:"margin-top-10"},[n("Table",{attrs:{context:e.self,border:"",data:e.roleList,columns:e.tableColums,stripe:""}})],1),e._v(" "),n("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:e.total,current:e.pageNumber,"page-size":e.pageSize,"show-total":"","show-elevator":""},on:{"on-change":e.changePage}})],1)])],1)],1)],1),e._v(" "),n("roleForm",{ref:"rf"}),e._v(" "),n("resTree",{ref:"rt"})],1)},o=[];r._withStripped=!0;var i={render:r,staticRenderFns:o};t.default=i}});